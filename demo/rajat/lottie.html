<!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.5/lottie.min.js"></script>
    <script src="https://cdnjs.com/libraries/bodymovin" type="text/javascript"></script>

</head>

<div id="myElement"></div>

<button onclick="renderNextFrame()">Click</button>

<style>
    body {
        background: red;
        margin: 0%;
    }
</style>

<body>

    <script>

        fetch('http://localhost:3001/data/')
            .then((response) => response.json())
            .then((json) => {
                loadFont()
                loadMolodFont()
                loadJson(json)
                changeText()
                let e = document.getElementById('myElement')
                e.style.fontFamily = 'Molot'
            })


        function loadFont() {

            const fontName = 'Poppins';
            const style = document.createElement('link');
            style.rel = 'stylesheet';
            style.href = `https://fonts.googleapis.com/css?family=Poppins`;
            document.head.appendChild(style);
        }

        function loadMolodFont() {
            let molotFont = new FontFace('Molot', 'url(MOLOT.OTF)')
            molotFont.load().then(function (loadedFace) {
                // use font here
                document.fonts.add(loadedFace)
            }).catch(function (error) {
                console.log(error)
            });
            console.log(document)
        }

        function load() {

            //'https://assets4.lottiefiles.com/packages/lf20_8N57Aic0ec.json',
            var animation = bodymovin.loadAnimation({
                container: document.getElementsByClassName('elee')[0], // Required
                path: 'https://assets6.lottiefiles.com/packages/lf20_p8bfn5to.json', // Required
                //path: 'text.json',
                renderer: 'svg', // Required
                name: "Hello World", // Name for future reference. Optional.
            })
        }

        let animation

        function loadJson(animationData) {

            animation = bodymovin.loadAnimation({
                container: document.getElementById('myElement'),
                //container: document.getElementsByClassName('myCss')[0],
                renderer: 'svg', // Required
                loop: true,
                //animationData: JSON.parse(animationData),
                animationData: animationData,
                name: "Hello World",
            })

            //animation.pause()

            animation.addEventListener('enterFrame', function () {
                frameCount++
                const frameEvent = new Event('onNewFrame');
                frameEvent.value = frameCount;
                document.dispatchEvent(frameEvent);
            })
        }

        var progress = 0;
        frameCount = 0;
        function renderNextFrame() {
            progress = progress + 0.7056;
            animation.goToAndStop(46.7, true)

        }

        function changeText() {
            console.log(animation)
            //animation.renderer.elements[0].updateDocumentData({ t: 'This is first line.  This is second', f: 'Poppins-Bold', s: '23' }, 0);
            animation.renderer.elements[0].updateDocumentData({ t: 'This is first line. This is second', f: 'Molot', s: '65' }, 0);
            animation.renderer.elements[0].canResizeFont(true);
        }


        let json2 = '{"v":"5.7.13","fr":29.9700012207031,"ip":0,"op":127.000005172816,"w":500,"h":196,"nm":"Comp 1","ddd":0,"assets":[],"fonts":{"list":[{"fName":"Poppins-Bold","fFamily":"Poppins","fStyle":"Bold","ascent":73.9990234375}]},"layers":[{"ddd":0,"ind":1,"ty":5,"nm":"Lottiefiles.","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[250,114.5,0],"ix":2,"l":2},"a":{"a":0,"k":[1.101,-62,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.121,0.121,0.667],"y":[1,1,1]},"o":{"x":[0.879,0.879,0.333],"y":[0,0,0]},"t":29,"s":[33,33,100]},{"i":{"x":[0.121,0.121,0.667],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":55,"s":[27,27,100]},{"i":{"x":[0.121,0.121,0.667],"y":[1,1,1]},"o":{"x":[0.879,0.879,0.333],"y":[0,0,0]},"t":80,"s":[27,27,100]},{"t":106.000004317469,"s":[33,33,100]}],"ix":6,"l":2}},"ao":0,"t":{"d":{"k":[{"s":{"s":220,"f":"Poppins-Bold","t":"Lottiefiles.","ca":0,"j":2,"tr":25,"lh":264,"ls":35,"fc":[0.129,0.733,0.726]},"t":0}]},"p":{},"m":{"g":1,"a":{"a":0,"k":[0,0],"ix":2}},"a":[{"nm":"Animator 1","s":{"t":0,"xe":{"a":0,"k":100,"ix":7},"ne":{"a":0,"k":100,"ix":8},"a":{"a":0,"k":100,"ix":4},"b":1,"rn":0,"sh":2,"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[-100]},{"t":40.0000016292334,"s":[100]}],"ix":3},"r":1},"a":{"p":{"a":0,"k":[0,70,0],"ix":2},"o":{"a":0,"k":0,"ix":9}}}]},"ip":0,"op":300.00001221925,"st":0,"bm":0}],"markers":[],"_chars":[{"ch":"L","size":220,"style":"Bold","w":47.7,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[6.244,-70.697],[6.244,0],[46.024,0],[46.024,-13.293],[23.465,-13.293],[23.465,-70.697]],"c":true},"ix":2},"nm":"L","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"L","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Poppins"},{"ch":"o","size":220,"style":"Bold","w":63.7,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,17.825],[16.516,0],[0,-17.825],[-16.516,0]],"o":[[0,-17.825],[-16.415,0],[0,17.825],[16.516,0]],"v":[[61.23,-28.098],[32.025,-57.001],[2.82,-28.098],[31.824,0.806]],"c":true},"ix":2},"nm":"o","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,9.467],[-6.244,0],[0,-9.567],[6.143,0]],"o":[[0,-9.567],[6.042,0],[0,9.467],[-6.244,0]],"v":[[20.343,-28.098],[32.025,-42.096],[43.707,-28.098],[31.824,-14.099]],"c":true},"ix":2},"nm":"o","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"o","np":5,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Poppins"},{"ch":"t","size":220,"style":"Bold","w":40.6,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-11.682,0],[0,0],[0,0],[0,0],[0,3.323],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,14.603],[0,0],[0,0],[0,0],[-3.827,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[8.963,-19.537],[28.802,0],[37.564,0],[37.564,-14.603],[31.421,-14.603],[26.184,-19.336],[26.184,-41.895],[37.463,-41.895],[37.463,-56.195],[26.184,-56.195],[26.184,-69.891],[8.963,-69.891],[8.963,-56.195],[2.115,-56.195],[2.115,-41.895],[8.963,-41.895]],"c":true},"ix":2},"nm":"t","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"t","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Poppins"},{"ch":"i","size":220,"style":"Bold","w":29.5,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[6.244,0],[23.465,0],[23.465,-56.195],[6.244,-56.195]],"c":true},"ix":2},"nm":"i","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[-6.143,0],[0,5.136],[6.042,0],[0,-5.237]],"o":[[6.042,0],[0,-5.237],[-6.143,0],[0,5.136]],"v":[[14.905,-62.036],[25.076,-71.301],[14.905,-80.667],[4.633,-71.301]],"c":true},"ix":2},"nm":"i","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"i","np":5,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Poppins"},{"ch":"e","size":220,"style":"Bold","w":61.6,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-5.64,0],[0,-6.143],[0,0]],"o":[[5.74,0],[0,0],[1.007,-6.244]],"v":[[31.018,-43.204],[41.592,-33.536],[20.041,-33.536]],"c":true},"ix":2},"nm":"e","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[-2.719,10.977],[0,0],[4.834,0],[0.604,7.352],[0,0],[0,1.611],[16.415,0],[0,-17.825],[-16.516,0]],"o":[[0,0],[-1.41,3.021],[-5.539,0],[0,0],[0.201,-1.712],[0,-17.12],[-16.718,0],[0,17.825],[13.998,0]],"v":[[57.907,-18.631],[39.578,-18.631],[30.615,-13.193],[19.94,-23.969],[58.914,-23.969],[59.216,-29.004],[31.219,-57.001],[2.82,-28.098],[31.219,0.806]],"c":true},"ix":2},"nm":"e","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"e","np":5,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Poppins"},{"ch":"f","size":220,"style":"Bold","w":36,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-6.647,-0.403],[0,0],[0,-14.703],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,-5.942],[0,0],[-17.12,-0.906],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[7.956,0],[25.177,0],[25.177,-41.895],[34.442,-41.895],[34.442,-56.195],[25.177,-56.195],[25.177,-56.699],[34.14,-64.252],[34.14,-78.854],[7.956,-57.806],[7.956,-56.195],[1.712,-56.195],[1.712,-41.895],[7.956,-41.895]],"c":true},"ix":2},"nm":"f","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"f","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Poppins"},{"ch":"l","size":220,"style":"Bold","w":29.5,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[6.244,0],[23.465,0],[23.465,-74.524],[6.244,-74.524]],"c":true},"ix":2},"nm":"l","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"l","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Poppins"},{"ch":"s","size":220,"style":"Bold","w":55.8,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,9.769],[0,8.963],[-4.028,0],[-0.504,-3.827],[0,0],[14.502,0],[0,-9.567],[0,-9.064],[4.431,0],[0.403,3.928],[0,0],[-15.005,0]],"o":[[-0.302,-20.947],[0,-2.719],[4.834,0],[0,0],[-1.108,-11.078],[-14.703,0],[0,20.645],[0,2.518],[-4.733,0],[0,0],[0.806,10.876],[14.099,0]],"v":[[51.865,-16.315],[21.149,-39.88],[27.393,-44.211],[35.651,-37.866],[51.563,-37.866],[27.896,-57.001],[5.035,-39.578],[35.651,-16.415],[28.903,-11.884],[20.242,-18.43],[3.223,-18.43],[29.105,0.806]],"c":true},"ix":2},"nm":"s","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"s","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Poppins"},{"ch":".","size":220,"style":"Bold","w":28.2,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,5.136],[6.042,0],[0,-5.338],[-6.143,0]],"o":[[0,-5.338],[-6.143,0],[0,5.136],[6.042,0]],"v":[[24.472,-8.459],[14.301,-17.926],[4.028,-8.459],[14.301,0.806]],"c":true},"ix":2},"nm":".","mn":"ADBE Vector Shape - Group","hd":false}],"nm":".","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Poppins"}]}'

        //loadFont()
        //loadJson(json2)
        //changeText()
    </script>

</body>

</html>